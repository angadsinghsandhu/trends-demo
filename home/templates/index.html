<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Massively by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		{% load static %}  
		<link rel="stylesheet" href="{% static 'assets/css/main.css' %}">  
		<noscript><link rel="stylesheet" href="{% static 'assets/css/noscript.css' %}" /></noscript>
	</head>
	<!-- TODO : Make Dark -->
	<!-- TODO: Background = #181a1b -->
	<!-- TODO: Text = #cecac3 -->

	<!-- graph scripts -->
	<script src="https://d3js.org/d3.v4.js"></script>
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

	<body class="is-preload">

		<!-- Wrapper -->
		<div id="wrapper" class="fade-in">

			<!-- Intro -->
			<div id="intro">
				<h1>These are<br />
				Trends</h1>


				<p>A free, fully responsive HTML5 + CSS3 site template designed by <a href="https://twitter.com/ajlkn">@ajlkn</a> for <a href="https://html5up.net">HTML5 UP</a><br />
				and released for free under the <a href="https://html5up.net/license">Creative Commons license</a>.</p>
				<ul class="actions">
					<li><a href="#header" class="button icon solid solo fa-arrow-down scrolly">Continue</a></li>
				</ul>
			</div>

			<!-- Header -->
			<header id="header">
				<a href="index.html" class="logo">Massively</a>
			</header>

			<!-- Nav -->
			<nav id="nav">
				<ul class="links">
					<li class="active"><a href="index.html">This is Massively</a></li>
					<li><a href="generic.html">Generic Page</a></li>
					<li><a href="elements.html">Elements Reference</a></li>
				</ul>
				<ul class="icons">
					<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
				</ul>
			</nav>

			<!-- Main -->
			<div id="main">

				<!-- Featured Post -->
				<article class="post featured">
					<header class="major">
						<span class="date" id="date">February 15, 2023</span>
						<h2><a href="#">And this is a<br />
						massive headline</a></h2>
					</header>

					<form action="" method="post">
						{% csrf_token %}
						{{ context.form }}
						<input type="submit" value=Submit>
					</form>
					
					<!-- <a href="#" class="image main"><img src="{% static 'images/pic01.jpg' %}" alt="" /></a> -->
					<!-- <svg id="myPlot" style="width:500px;height:500px"></svg> -->

					<!-- Initialize a select button -->
					<select id="selectButton"></select>
					<!-- Create a div where the graph will take place -->
					<div id="my_dataviz" style="border: 5px solid black; padding: 10px;"></div>

					<!-- TODO : add responsive design to graph -->
					<!-- TODO : Add dropdown logic for graph type (https://d3-graph-gallery.com/graph/connectedscatter_select.html) -->
					<!-- TODO : Add line chart with zoom (https://d3-graph-gallery.com/graph/line_brushZoom.html) -->
					<!-- TODO : Line Plot with annotations (https://d3-graph-gallery.com/graph/connectedscatter_tooltip.html) -->
					<script type="text/javascript">

						// set the dimensions and margins of the graph
						var margin = {top: 10, right: 150, bottom: 20, left: 30},
							divW = d3.select('#my_dataviz').node().getBoundingClientRect().width,
							width = divW - margin.left - margin.right,
							height = divW/2 - margin.top - margin.bottom;
						
						// append the svg object to the body of the page
						var svg = d3.select("#my_dataviz")
						  .append("svg")
							.attr("width", width + margin.left + margin.right)
							.attr("height", height + margin.top + margin.bottom)
						  .append("g")
							.attr("transform",
								  "translate(" + margin.left + "," + margin.top + ")");
						
						var x = "{{ context.graph | safe }}";
						console.log(x)
						const graph = JSON.parse(x.replace(/'/g, '"'))
						console.log(graph);

						/* MAKE GRAPH */
						var allGroup = graph.rel_terms

						// Reformat the data: we need an array of arrays of {x, y} tuples
						var dataReady =  graph.dataready

						// I strongly advise to have a look to dataReady with
						console.log(dataReady)
						
						// A color scale: one color for each group
						var myColor = d3.scaleOrdinal()
						  .domain(allGroup)
						  .range(d3.schemeSet2);
					
						// Add X axis --> it is a date format
						var x = d3.scaleLinear()
						  .domain([0,7])
						  .range([ 0, width ]);

						svg.append("g")
						  .attr("transform", "translate(0," + height + ")")
						  .call(d3.axisBottom(x));
					
						// Add Y axis
						var y = d3.scaleLinear()
						  .domain( [0,1.2])
						  .range([ height, 0 ]);

						svg.append("g")
						  .call(d3.axisLeft(y));
					
						// Add the lines
						var line = d3.line()
						  .x(function(d) { return x(+d.time) })
						  .y(function(d) { return y(+d.value) })
						
						svg.selectAll("myLines")
						  .data(dataReady)
						  .enter()
						  .append("path")
							.attr("class", function(d){ return d.name })
							.attr("d", function(d){ return line(d.values) } )
							.attr("stroke", function(d){ return myColor(d.name) })
							.style("stroke-width", 4)
							.style("fill", "none")
					
						// Add the points
						svg
						  // First we need to enter in a group
						  .selectAll("myDots")
						  .data(dataReady)
						  .enter()
							.append('g')
							.style("fill", function(d){ return myColor(d.name) })
							.attr("class", function(d){ return d.name })
						  // Second we need to enter in the 'values' part of this group
						  .selectAll("myPoints")
						  .data(function(d){ return d.values })
						  .enter()
						  .append("circle")
							.attr("cx", function(d) { return x(d.time) } )
							.attr("cy", function(d) { return y(d.value) } )
							.attr("r", 5)
							.attr("stroke", "white")
					
						// Add a label at the end of each line
						svg
						  .selectAll("myLabels")
						  .data(dataReady)
						  .enter()
							.append('g')
							.append("text")
							  .attr("class", function(d){ return d.name })
							  .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; }) // keep only the last value of each time series
							  .attr("transform", function(d) { return "translate(" + x(d.value.time) + "," + y(d.value.value) + ")"; }) // Put the text at the position of the last point
							  .attr("x", 12) // shift the text a bit more right
							  .text(function(d) { return d.name; })
							  .style("fill", function(d){ return myColor(d.name) })
							  .style("font-size", 15)

						var first = true;
						var dist = 30;
						var last = 0;
						
					
						// Add a legend (interactive)
						svg
						  .selectAll("myLegend")
						  .data(dataReady)
						  .enter()
							.append('g')
							.append("text")
							  .attr('x', function(d,i){ 
								if (first) {
									first = false;
									last = d.name.length;
									return 30;
								} else {
									dist += (last+2)*9;
									last = d.name.length;
									return dist;
								}	
							})
							  .attr('y', 30)
							  .text(function(d) { return d.name; })
							  .style("fill", function(d){ return myColor(d.name) })
							  .style("font-size", 15)
							  .style("cursor", "pointer")
							.on("click", function(d){
							  // is the element currently visible ?
							  currentOpacity = d3.selectAll("." + d.name).style("opacity")
							  // Change the opacity: from 0 to 1 or from 1 to 0
							  d3.selectAll("." + d.name).transition().style("opacity", currentOpacity == 1 ? 0:1)
							})						
						
					</script>

					<header class="major">
						<p>Aenean ornare velit lacus varius enim ullamcorper proin aliquam<br />
						facilisis ante sed etiam magna interdum congue. Lorem ipsum dolor<br />
						amet nullam sed etiam veroeros.</p>
					</header>

					<ul class="actions special">
						<li><a href="#" class="button large">Full Story</a></li>
					</ul>
				</article>

				<!-- Posts -->
				<section class="posts">
					<article>
						<header>
							<span class="date">April 24, 2017</span>
							<h2><a href="#">Sed magna<br />
							ipsum faucibus</a></h2>
						</header>
						<a href="#" class="image fit"><img src="{% static 'images/pic02.jpg' %}" alt="" /></a>
						<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
						<ul class="actions special">
							<li><a href="#" class="button">Full Story</a></li>
						</ul>
					</article>
					<article>
						<header>
							<span class="date">April 22, 2017</span>
							<h2><a href="#">Primis eget<br />
							imperdiet lorem</a></h2>
						</header>
						<a href="#" class="image fit"><img src="{% static 'images/pic03.jpg' %}" alt="" /></a>
						<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
						<ul class="actions special">
							<li><a href="#" class="button">Full Story</a></li>
						</ul>
					</article>
					<article>
						<header>
							<span class="date">April 18, 2017</span>
							<h2><a href="#">Ante mattis<br />
							interdum dolor</a></h2>
						</header>
						<a href="#" class="image fit"><img src="{% static 'images/pic04.jpg' %}" alt="" /></a>
						<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
						<ul class="actions special">
							<li><a href="#" class="button">Full Story</a></li>
						</ul>
					</article>
					<article>
						<header>
							<span class="date">April 14, 2017</span>
							<h2><a href="#">Tempus sed<br />
							nulla imperdiet</a></h2>
						</header>
						<a href="#" class="image fit"><img src="{% static 'images/pic05.jpg' %}" alt="" /></a>
						<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
						<ul class="actions special">
							<li><a href="#" class="button">Full Story</a></li>
						</ul>
					</article>
					<article>
						<header>
							<span class="date">April 11, 2017</span>
							<h2><a href="#">Odio magna<br />
							sed consectetur</a></h2>
						</header>
						<a href="#" class="image fit"><img src="{% static 'images/pic06.jpg' %}" alt="" /></a>
						<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
						<ul class="actions special">
							<li><a href="#" class="button">Full Story</a></li>
						</ul>
					</article>
					<article>
						<header>
							<span class="date">April 7, 2017</span>
							<h2><a href="#">Augue lorem<br />
							primis vestibulum</a></h2>
						</header>
						<a href="#" class="image fit">
							<img src="{% static 'images/pic07.jpg' %}" alt="Picture 7" />
						</a>
						<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
						<ul class="actions special">
							<li><a href="#" class="button">Full Story</a></li>
						</ul>
					</article>
				</section>

				<!-- Footer -->
				<footer>
					<div class="pagination">
						<!--<a href="#" class="previous">Prev</a>-->
						<a href="#" class="page active">1</a>
						<a href="#" class="page">2</a>
						<a href="#" class="page">3</a>
						<span class="extra">&hellip;</span>
						<a href="#" class="page">8</a>
						<a href="#" class="page">9</a>
						<a href="#" class="page">10</a>
						<a href="#" class="next">Next</a>
					</div>
				</footer>

			</div>

			<!-- Footer -->
			<footer id="footer">
				<section>
					<form method="post" action="#">
						<div class="fields">
							<div class="field">
								<label for="name">Name</label>
								<input type="text" name="name" id="name" />
							</div>
							<div class="field">
								<label for="email">Email</label>
								<input type="text" name="email" id="email" />
							</div>
							<div class="field">
								<label for="message">Message</label>
								<textarea name="message" id="message" rows="3"></textarea>
							</div>
						</div>
						<ul class="actions">
							<li><input type="submit" value="Send Message" /></li>
						</ul>
					</form>
				</section>
				<section class="split contact">
					<section class="alt">
						<h3>Address</h3>
						<p>1234 Somewhere Road #87257<br />
						Nashville, TN 00000-0000</p>
					</section>
					<section>
						<h3>Phone</h3>
						<p><a href="#">(000) 000-0000</a></p>
					</section>
					<section>
						<h3>Email</h3>
						<p><a href="#">info@untitled.tld</a></p>
					</section>
					<section>
						<h3>Social</h3>
						<ul class="icons alt">
							<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</section>
				</section>
			</footer>

			<!-- Copyright -->
			<div id="copyright">
				<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
			</div>

		</div>

		<!-- Scripts -->
			<!-- page javascript -->
			<script src="{% static 'assets/js/jquery.min.js' %}"></script>
			<script src="{% static 'assets/js/jquery.scrollex.min.js' %}"></script>
			<script src="{% static 'assets/js/jquery.scrolly.min.js' %}"></script>
			<script src="{% static 'assets/js/browser.min.js' %}"></script>
			<script src="{% static 'assets/js/breakpoints.min.js' %}"></script>
			<script src="{% static 'assets/js/util.js' %}"></script>
			<script src="{% static 'assets/js/main.js' %}"></script>

	</body>
</html>